<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UpdateElement í…ŒìŠ¤íŠ¸</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .container {
        border: 1px solid #ccc;
        padding: 20px;
        margin: 10px 0;
      }
      button {
        margin: 5px;
        padding: 10px;
        cursor: pointer;
      }
      .highlight {
        background-color: yellow;
      }
      .error {
        color: red;
      }
      .success {
        color: green;
      }
    </style>
  </head>
  <body>
    <h1>UpdateElement í…ŒìŠ¤íŠ¸</h1>
    <p>ì½˜ì†”ì„ ì—´ì–´ì„œ oldNodeì™€ newNodeì˜ ì°¨ì´ë¥¼ í™•ì¸í•˜ì„¸ìš”!</p>

    <div class="container">
      <h3>í…ŒìŠ¤íŠ¸ ì˜ì—­</h3>
      <div id="test-container"></div>
    </div>

    <div class="container">
      <h3>í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤</h3>
      <button onclick="testTextChange()">ğŸ“ í…ìŠ¤íŠ¸ ë³€ê²½</button>
      <button onclick="testPropsChange()">âš™ï¸ Props ë³€ê²½</button>
      <button onclick="testTypeChange()">ğŸ·ï¸ íƒ€ì… ë³€ê²½</button>
      <button onclick="testChildrenChange()">ğŸ‘¥ ìì‹ ë³€ê²½</button>
      <button onclick="testAddRemove()">â•â– ë…¸ë“œ ì¶”ê°€/ì œê±°</button>
      <button onclick="testComplexChange()">ğŸ”„ ë³µí•© ë³€ê²½</button>
    </div>

    <div class="container">
      <h3>í˜„ì¬ ìƒíƒœ</h3>
      <pre id="current-state">ì´ˆê¸° ìƒíƒœ</pre>
    </div>

    <script type="module">
      import { renderElement, createVNode } from "./src/lib/index.js";

      const container = document.getElementById("test-container");
      const statusEl = document.getElementById("current-state");
      let currentState = "initial";

      // ì´ˆê¸° ë Œë”ë§
      renderElement(createVNode("div", { className: "initial" }, "Hello World"), container);

      // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
      function updateStatus(newState) {
        currentState = newState;
        statusEl.textContent = `í˜„ì¬ ìƒíƒœ: ${newState}`;
      }

      // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤ì„ ì „ì—­ì— ë“±ë¡
      window.testTextChange = function () {
        console.log("\n=== ğŸ“ í…ìŠ¤íŠ¸ ë³€ê²½ í…ŒìŠ¤íŠ¸ ===");
        const newText = currentState === "textChanged" ? "Hello World" : "Updated Text!";
        renderElement(createVNode("div", { className: "initial" }, newText), container);
        updateStatus(currentState === "textChanged" ? "initial" : "textChanged");
      };

      window.testPropsChange = function () {
        console.log("\n=== âš™ï¸ Props ë³€ê²½ í…ŒìŠ¤íŠ¸ ===");
        const newClass = currentState === "propsChanged" ? "initial" : "highlight";
        renderElement(createVNode("div", { className: newClass, id: "test-div" }, "Hello World"), container);
        updateStatus(currentState === "propsChanged" ? "initial" : "propsChanged");
      };

      window.testTypeChange = function () {
        console.log("\n=== ğŸ·ï¸ íƒ€ì… ë³€ê²½ í…ŒìŠ¤íŠ¸ ===");
        const tag = currentState === "typeChanged" ? "div" : "span";
        renderElement(createVNode(tag, { className: "initial" }, "Hello World"), container);
        updateStatus(currentState === "typeChanged" ? "initial" : "typeChanged");
      };

      window.testChildrenChange = function () {
        console.log("\n=== ğŸ‘¥ ìì‹ ë³€ê²½ í…ŒìŠ¤íŠ¸ ===");
        if (currentState === "childrenChanged") {
          renderElement(createVNode("div", { className: "initial" }, "Single Child"), container);
          updateStatus("initial");
        } else {
          renderElement(
            createVNode(
              "div",
              { className: "initial" },
              createVNode("span", null, "Child 1"),
              createVNode("span", null, "Child 2"),
              createVNode("span", null, "Child 3"),
            ),
            container,
          );
          updateStatus("childrenChanged");
        }
      };

      window.testAddRemove = function () {
        console.log("\n=== â•â– ë…¸ë“œ ì¶”ê°€/ì œê±° í…ŒìŠ¤íŠ¸ ===");
        if (currentState === "nodeAdded") {
          renderElement(createVNode("div", { className: "initial" }, "Original"), container);
          updateStatus("initial");
        } else {
          renderElement(
            createVNode("div", { className: "initial" }, "Original", createVNode("p", null, "Added Node!")),
            container,
          );
          updateStatus("nodeAdded");
        }
      };

      window.testComplexChange = function () {
        console.log("\n=== ğŸ”„ ë³µí•© ë³€ê²½ í…ŒìŠ¤íŠ¸ ===");
        if (currentState === "complexChanged") {
          renderElement(createVNode("div", { className: "initial" }, "Simple"), container);
          updateStatus("initial");
        } else {
          renderElement(
            createVNode(
              "section",
              { className: "success", id: "complex" },
              createVNode("h2", null, "Complex Structure"),
              createVNode(
                "ul",
                null,
                createVNode("li", null, "Item 1"),
                createVNode("li", null, "Item 2"),
                createVNode("li", { className: "error" }, "Item 3"),
              ),
              createVNode("button", { onClick: () => alert("Clicked!") }, "Click Me"),
            ),
            container,
          );
          updateStatus("complexChanged");
        }
      };

      updateStatus("initial");
    </script>
  </body>
</html>
